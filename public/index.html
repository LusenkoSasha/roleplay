<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <link rel="stylesheet" href="css/style.css">
  <link href="https://fonts.googleapis.com/css2?family=Red+Hat+Text:wght@400;700&display=swap" rel="stylesheet">
  <title>Roleplay</title>
</head>
<body>
<div class="wrapper">
  <section class="main">
    <div class="main__body">
      <div class="main__logo"><img src="img/Logo-1.png" alt=""></div>
      <div class="main__title"><p>Role<span>play</span></p></div>
      <div class="main__btn">
        <a class="button" id="btn" href="#wrapper-1">Generate</a>
      </div>
    </div>
  </section>
</div>
<div id="wrapper-1" class="wrapper-1">
  <section class="main-1">
    <div class="main__body">
      <div class="main__logo-1"><img src="img/Logo-1.png" alt=""></div>
      <div id="card">
        <div class="popup">
          <div class="title">Personality: <span id="personality">Optimist, Emotional, Detail-oriented</span></div>
          <div class="popup__wrap">
            <div class="popup__blocks">
              <div class="block__left">
                <ul class="block__left-list">
                  <li class="block__left-item">
                    <div class="icon">
                      <img src="img/Vector.png" alt="">
                    </div>
                    <div class="text">
                      <p>Client Type:</p>
                      <span id="client_type">Buyer</span>
                    </div>
                  </li>
                  <li class="block__left-item">
                    <div class="icon">
                      <img src="img/Vector-1.png" alt="">
                    </div>
                    <div class="text">
                      <p>Profession:</p>
                      <span id="profession">Graphic Designer</span>
                    </div>
                  </li>
                  <li class="block__left-item">
                    <div class="icon">
                      <img src="img/Vector-2.png" alt="">
                    </div>
                    <div class="text">
                      <p>Property Criteria:</p>
                      <span id="property_criteria">$850k, Appartment; 2 beds, 2 baths</span>
                    </div>
                  </li>
                  <li class="block__left-item">
                    <div class="icon">
                      <img src="img/Vector-3.png" alt="">
                    </div>
                    <div class="text">
                      <p>Area:</p>
                      <span id="area">Santa Clara County</span>
                    </div>
                  </li>
                  <li class="block__left-item">
                    <div class="icon">
                      <img src="img/Vector-4.png" alt="">
                    </div>
                    <div class="text">
                      <p>Family Status:</p>
                      <span id="family_status">Divorced, with 1 kid (6 y.o.)</span>
                    </div>
                  </li>
                  <li class="block__left-item">
                    <div class="icon">
                      <img src="img/Vector-4.png" alt="">
                    </div>
                    <div class="text">
                      <p>Pre-Approved:</p>
                      <span id="pre_approved">Yes</span>
                    </div>
                  </li>
                </ul>
              </div>
            </div>
            <div class="popup__blocks">
              <div class="block__right">
                <ul class="block__left-list">
                  <li class="block__left-item">
                    <div class="icon">
                      <img src="img/Vector-5.png" alt="">
                    </div>
                    <div class="text">
                      <p>Pets:</p>
                      <span id="pets">1 cat, 1 dog</span>
                    </div>
                  </li>
                  <li class="block__left-item">
                    <div class="icon">
                      <img src="img/Vector-6.png" alt="">
                    </div>
                    <div class="text">
                      <p>Time Frame:</p>
                      <span id="time_frame">3 - 6 months</span>
                    </div>
                  </li>
                  <li class="block__left-item">
                    <div class="icon">
                      <img src="img/Vector-7.png" alt="">
                    </div>
                    <div class="text">
                      <p>Surface Motivation:</p>
                      <span id="surface_motivation">Looking for a state of ease & satisfaction</span>
                    </div>
                  </li>
                  <li class="block__left-item">
                    <div class="icon">
                      <img src="img/Vector-8.png" alt="">
                    </div>
                    <div class="text">
                      <p>Hidden Motivation:</p>
                      <span id="hidden_motivation">They want freedom from intrusion of others</span>
                    </div>
                  </li>
                  <li class="block__left-item">
                    <div class="icon">
                      <img src="img/Vector-9.png" alt="">
                    </div>
                    <div class="text">
                      <p>Red flags:</p>
                      <span id="red_flags">Not pre-approved yet</span>
                    </div>
                  </li>
                </ul>
              </div>
            </div>
          </div>
        </div>
        <div class="popup-back">
          <div class="title">Personality: <span id="personality_back">Optimist, Emotional, Detail-oriented</span></div>
          <div class="popup__wrap">
            <div class="popup__blocks">
              <div class="block__left">
                <ul class="block__left-list">
                  <li class="block__left-item">
                    <div class="icon">
                      <img src="img/Vector.png" alt="">
                    </div>
                    <div class="text">
                      <p>Client Type:</p>
                      <span id="client_type_back">Buyer</span>
                    </div>
                  </li>
                  <li class="block__left-item">
                    <div class="icon">
                      <img src="img/Vector-1.png" alt="">
                    </div>
                    <div class="text">
                      <p>Financial advisor:</p>
                      <span id="profession_back">Graphic Designer</span>
                    </div>
                  </li>
                  <li class="block__left-item">
                    <div class="icon">
                      <img src="img/Vector-2.png" alt="">
                    </div>
                    <div class="text">
                      <p>Property Criteria:</p>
                      <span id="property_criteria_back">$850k, Appartment; 2 beds, 2 baths</span>
                    </div>
                  </li>
                  <li class="block__left-item">
                    <div class="icon">
                      <img src="img/Vector-3.png" alt="">
                    </div>
                    <div class="text">
                      <p>Area:</p>
                      <span id="area_back">Santa Clara County</span>
                    </div>
                  </li>
                  <li class="block__left-item">
                    <div class="icon">
                      <img src="img/Vector-4.png" alt="">
                    </div>
                    <div class="text">
                      <p>Family Status:</p>
                      <span id="family_status_back">Divorced, with 1 kid (6 y.o.)</span>
                    </div>
                  </li>
                  <li class="block__left-item">
                    <div class="icon">
                      <img src="img/Vector-4.png" alt="">
                    </div>
                    <div class="text">
                      <p>Pre-Approved:</p>
                      <span id="pre_approved_back">Yes</span>
                    </div>
                  </li>
                </ul>
              </div>
            </div>
            <div class="popup__blocks">
              <div class="block__right">
                <ul class="block__left-list">
                  <li class="block__left-item">
                    <div class="icon">
                      <img src="img/Vector-5.png" alt="">
                    </div>
                    <div class="text">
                      <p>Pets:</p>
                      <span id="pets_back">1 cat, 1 dog</span>
                    </div>
                  </li>
                  <li class="block__left-item">
                    <div class="icon">
                      <img src="img/Vector-6.png" alt="">
                    </div>
                    <div class="text">
                      <p>Time Frame:</p>
                      <span id="time_frame_back">3 - 6 months</span>
                    </div>
                  </li>
                  <li class="block__left-item">
                    <div class="icon">
                      <img src="img/Vector-7.png" alt="">
                    </div>
                    <div class="text">
                      <p>Surface Motivation:</p>
                      <span id="surface_motivation_back">Looking for a state of ease & satisfaction</span>
                    </div>
                  </li>
                  <li class="block__left-item">
                    <div class="icon">
                      <img src="img/Vector-8.png" alt="">
                    </div>
                    <div class="text">
                      <p>Hidden Motivation:</p>
                      <span id="hidden_motivation_back">They want freedom from intrusion of others</span>
                    </div>
                  </li>
                  <li class="block__left-item">
                    <div class="icon">
                      <img src="img/Vector-9.png" alt="">
                    </div>
                    <div class="text">
                      <p>Red flags:</p>
                      <span id="red_flags_back">Not pre-approved yet</span>
                    </div>
                  </li>
                </ul>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="main__btn-1">
        <button class="button-1" id="btn-1">Generate new</button>
      </div>
    </div>
  </section>
</div>
<script>
  function callApiAndInsertData(flipped = false) {
    let xhr = new XMLHttpRequest();
    xhr.open('GET', '/random.php');
    xhr.send();

    xhr.onload = function () {
      let existClassFlipped = document.getElementById("card").classList.contains("flipped");

      for (const [key, value] of Object.entries(JSON.parse(xhr.response))) {
        if (!existClassFlipped && flipped) {
          document.getElementById(key + "_back").innerHTML = value;
        } else {
          document.getElementById(key).innerHTML = value;
        }
      }
    };
  }

  function openCard() {

    var card = document.getElementById('card');
    setTimeout(function () {
      card.classList.toggle('flipped');
    }, 1000);
  }

  document.getElementById('btn').addEventListener('click', function () {
    callApiAndInsertData();
  }, false);
  document.getElementById('btn-1').addEventListener('click', function () {
    callApiAndInsertData(true)
    openCard();
  }, false);

  if (window.location.toString().includes("#wrapper-1")) {
    callApiAndInsertData()
  }


</script>
</body>
</html>